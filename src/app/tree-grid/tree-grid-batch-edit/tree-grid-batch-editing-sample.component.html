<div class="grid__wrapper">
    <igx-tree-grid #treeGrid [data]="data"
        primaryKey="EmployeID"
        foreignKey="PID"
        width ="100%"
        height ="500px"
        rowEditable=true
        rowSelectable=true
        columnHiding=true
        >

        <igx-column field="LastName" header="Last Name" [resizable]="false" [movable]="false" [filterable]="false" [sortable]="false" [editable]="true" [dataType]="'string'">
        </igx-column>
        <igx-column field="FirstName" header="First Name" [resizable]="true" [movable]="true" [filterable]="true" [sortable]="true" [editable]="true" [dataType]="'string'">
        </igx-column>
        <igx-column field="Title" header="Title" [resizable]="true" [movable]="true" [filterable]="true" [sortable]="true" [editable]="true" [dataType]="'string'">
        </igx-column>
        <igx-column field="HireDate" header="Hire Date" [resizable]="true" [movable]="true" [filterable]="true" [sortable]="true" [editable]="true" [dataType]="'date'">
        </igx-column>
        <igx-column width="150px">
            <ng-template igxCell let-cell="cell" let-val>
                <button igxButton (click)="deleteRow($event, 'treeGrid', cell.cellID.rowID)">Delete</button>
            </ng-template>
        </igx-column>
    </igx-tree-grid>
    <div class="buttons-wrapper">
        <button igxButton (click)="addRow('treeGrid')">Add Row</button>
        <div class="transaction-buttons-wrapper">
            <button igxButton [disabled]="!undoEnabled" (click)="undo('treeGrid')">Undo</button>
            <button igxButton [disabled]="!redoEnabled" (click)="redo('treeGrid')">Redo</button>
            <button igxButton [disabled]="!hasTransactions" (click)="openCommitDialog('treeGrid')">Commit</button>
        </div>
    </div>
    <div igxToggle class="dialog__container">
        <div class="dialog__header">Submit the following transactions?</div>
        <div class="dialog__body">
                <igx-grid #dialogGrid [data]="treeGrid.transactions.aggregatedState(true)" [rowHeight]="64" [primaryKey]="'id'"
                    width="100%" height="300px" [emptyGridMessage]="'No available transactions'">
                    <igx-column field="id" header="ID" [dataType]="'string'" width="100px"></igx-column>
                    <igx-column field="type" header="Type" width="150px" [sortable]="true">
                        <ng-template igxCell let-cell="cell" let-val>
                            <span [class]="classFromType(val)">{{ typeFormatter(val) }}</span>
                        </ng-template>
                    </igx-column>
                    <igx-column field="newValue" header="Value" width="900px">
                            <ng-template igxCell let-cell="cell" let-val>
                                    <span class="transaction-log">{{ stateFormatter(val) }}</span>
                                </ng-template>
                    </igx-column>
                </igx-grid>
        </div>
        <div class="dialog__buttons">
                <button igxButton (click)="commit()">Commit</button>
                <button igxButton (click)="discard()">Discard</button>
                <button igxButton (click)="cancel()">Cancel</button>
        </div>
    </div>
</div>


