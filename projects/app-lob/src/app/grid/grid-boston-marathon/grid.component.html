<div class="grid__wrapper">
    <div class="sample__header">
        <div class="switch-sample">
            <h5 class="switch-sample__title">Boston Marathon 2020</h5>
            <igx-switch [(ngModel)]="live" [disabled]="isFinished" title="Start/Stop the marathon"> <span class="switch-sample__label">Live</span>
            </igx-switch>
        </div>
        <igx-input-group>
            <input class="gridSample__filter" igxInput type="text" placeholder="Filter by country" (input)="filter($event.target.value)">
        </igx-input-group>
    </div>
    <div class="grid__wrapper__inner">
        <igx-grid #grid1 igxPreventDocumentScroll
            [data]="localData"
            [paging]="true"
            [perPage]="10"
            height="600px"
            displayDensity="cosy"
            [allowFiltering]="true"
            [filterMode]="'excelStyleFilter'"
            [allowAdvancedFiltering]="true">

            <igx-column header="Rank" [width]="'12%'" field="Id" sortable="true" [filterable]="false">
                <ng-template igxCell let-cell="cell">
                    <div class="cell__inner">
                        <div>{{ grid1.page * grid1.perPage + cell.row.index + 1 }}</div>
                        <ng-container *ngIf="isTop3(cell)">
                            <span class="cup" *ngIf="cell.row.index === 0">
                                <img src="assets/images/grid/trophy_gold.svg" alt="First place Trophy image" />
                            </span>
                            <span class="cup" *ngIf="cell.row.index === 1">
                                <img src="assets/images/grid/trophy_silver.svg" alt="Second place Trophy image" />
                            </span>
                            <span class="cup" *ngIf="cell.row.index === 2">
                                <img src="assets/images/grid/trophy_bronze.svg" alt="Third place Trophy image" />
                            </span>
                        </ng-container>
                    </div>
                </ng-template>
            </igx-column>

            <igx-column field="Name" header="Athlete" [width]="athleteColumnWidth" [hasSummary]="true">
                <ng-template igxCell let-cell="cell">
                    <div class="cell__inner">
                        <igx-avatar [src]="cell.row.rowData.Avatar" roundShape="true" size="small"> </igx-avatar><span class="athlete_name">{{ cell.value }}</span>
                        <igx-badge *ngIf="live" [type]="getBadgeType(cell)" [icon]="getIconType(cell)"></igx-badge>
                    </div>

                </ng-template>
            </igx-column>

            <igx-column field="Speed" header="Speed" [width]="'23%'" [filterable]="false" [hasSummary]="true" [summaries]="speedSummary">
                <ng-template igxCell let-val>
                    <igx-sparkline height="40px" width="190px" [dataSource]="val" valueMemberPath="Speed" displayType="Line" minimum="0" lineThickness="2" brush="rgb(0, 153, 255)">
                    </igx-sparkline>
                </ng-template>
            </igx-column>

            <igx-column field="TrackProgress" header="Progress" [filterable]="false" [width]="'10%'">
                <ng-template igxCell let-val let-cell="cell">
                    <div class="linear-bar-container">
                        <igx-circular-bar [value]="val" [max]="100" [animate]="true" [textVisibility]="true"></igx-circular-bar>
                    </div>
                </ng-template>
            </igx-column>
            <igx-column field="BeatsPerMinute" header="Heart Rate (bpm)" [width]="'15%'" [hasSummary]="true" dataType="number" [summaries]="bnpSummary" [hidden]="hideBeatsPerMinute" [filterable]="false">
            </igx-column>

            <igx-column field="TopSpeed" header="Top Speed" [width]="'9%'" dataType="number" [hasSummary]="true" [summaries]="topSpeedSummary" [filterable]="false" [hidden]="live">
                <ng-template igxCell let-val>
                    <div class="cell__inner">
                        {{ val | number: '1.1-5' }}
                    </div>
                </ng-template>
            </igx-column>

            <igx-column field="CountryFlag" header="Country" [width]="'10%'" [filterable]="false">
                <ng-template igxCell let-cell="cell">
                    <div class="cell__inner_2">
                        <span>
                            <img [src]="cell.value" class="flag" />
                        </span>
                    </div>
                </ng-template>
            </igx-column>
        </igx-grid>

        <div class="s-overlay" [hidden]="!showWinnerOverlay" #winnerAlert>
            <div class="s-overlay__inner">
                <div class="s-overlay">
                    <div class="s-overlay__heading">
                        <img src="assets/images/grid/trophy_gold.svg" alt="First place Trophy image" />
                        <span>Winner</span>
                        <img src="assets/images/grid/trophy_gold.svg" alt="First place Trophy image" />
                    </div>
                    <div class="s-overlay__players">
                        <div class="s-overlay__player" [ngClass]="hasWinner ? 's-overlay__player--winner' : ''">
                            <igx-avatar size="large" [roundShape]="true" [src]="'https://randomuser.me/api/portraits/men/1.jpg'"></igx-avatar>
                            <p class="s-overlay__player-name">Player name</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="s-overlay s-overlay--finish" [hidden]="!showFinishedOverlay" #finishedAlert>
            <div class="s-overlay__inner">
                <div class="s-overlay__heading">
                    <span>Race Finished !!!</span>
                </div>
                <!-- TODO 1. Loop the players for first, second, and third place inside the ng-container  -->
                <ng-container>
                    <div class="s-overlay__players">
                        <div class="s-overlay__player" [ngClass]="hasWinner ? 's-overlay__player--winner' : ''">
                            <igx-avatar [size]="hasWinner? 'large': 'medium'" [roundShape]="true" [src]="'https://randomuser.me/api/portraits/men/1.jpg'"></igx-avatar>
                            <p class="s-overlay__player-name">Player name</p>
                        </div>
                    </div>
                </ng-container>
            </div>
        </div>
    </div>
</div>
